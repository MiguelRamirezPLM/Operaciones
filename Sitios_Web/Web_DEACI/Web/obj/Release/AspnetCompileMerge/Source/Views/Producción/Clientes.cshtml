<link href="~/Styles/Producci%c3%b3n_Clientes.css" rel="stylesheet" />
<link href="~/Styles/Ventas_Productos.css" rel="stylesheet" />
<link href="~/Styles/Ventas_Clientes.css" rel="stylesheet" />
@{
    SessionCompanyEditions _Session = (SessionCompanyEditions)Session["SessionCompanyEditions"];
}

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

<script src="~/Scripts/CompaniesProductionScripts.js"></script>
@model IEnumerable<Web.Models.plm_spGetCompaniesByEditionIdByCompanyTypeId_Result>
@using Web.Models;
@{
    ViewBag.Title = "Cliente";
    PLMUsers plm = new PLMUsers();
    DEACI_20150917Entities db = new DEACI_20150917Entities();
}
<style>
    #custom-search-input {
        padding: 1px;
        border: solid 1px #E4E4E4;
        border-radius: 10px;
        background-color: #fff;
    }

        #custom-search-input input {
            border: 0;
            box-shadow: none;
        }

        #custom-search-input button {
            margin: 1px 0 0 0;
            background: none;
            box-shadow: none;
            border: 0;
            color: #666666;
            padding: 0 1px 0 2px;
            border-left: solid 1px #ccc;
        }

            #custom-search-input button:hover {
                border: 0;
                box-shadow: none;
                border-left: solid 1px #ccc;
            }

        #custom-search-input .glyphicon-search {
            font-size: 18px;
        }
</style>
<div class="container center col-lg-10" align="center">
    <div class="row" align="center">
        <div align="center">
            <button type="button" class="btn btn-default3 navbar-default btn-nav ribbon Estilo3"> Producción</button>
        </div>
    </div>
    <table class="table table-hover table-bordered">
        <tr>
            <td width="182" align="center" class="warning Estilo4 btn-nav">
                <div>
                    <div align="right">País:</div>
                </div>
            </td>
            <td width="950" align="center" class=" Estilo4 btn-nav">
                <div>
                    <div align="left">@ViewData["País"]</div>
                </div>
            </td>
        </tr>
        <tr>
            <td width="182" align="center" class="warning Estilo4 btn-nav">
                <div>
                    <div align="right">Obra:</div>
                </div>
            </td>
            <td width="950" align="center" class=" Estilo4 btn-nav">
                <div>
                    <div align="left">@ViewData["Obra"]</div>
                </div>
            </td>
        </tr>
        <tr>
            <td width="182" align="center" class="warning Estilo4 btn-nav">
                <div>
                    <div align="right">Edición:</div>
                </div>
            </td>
            <td width="950" align="center" class=" Estilo4 btn-nav">
                <div>
                    <div align="left">@ViewData["Edición"]</div>
                </div>
            </td>
        </tr>
        <tr>
            <td width="182" align="center" class="warning Estilo4 btn-nav">
                <div>
                    <div align="right">Tipo de cliente:</div>
                </div>
            </td>
            <td width="950" align="center" class=" Estilo4 btn-nav">
                <div>
                    <div align="left">@ViewData["TipoCliente"]</div>
                </div>
            </td>
        </tr>
        @{
            var _CompanyEditionsActive = (from _ce in db.CompanyEditions
                                          where _ce.CompanyId == _Session.ed
                                          && _ce.EditionId == _Session.id
                                          select _ce).ToList();
            foreach (var a in _CompanyEditionsActive)
            {
                if (a.CloseClient == false)
                {
                    <tr>
                        <td colspan="2" width="182" align="center" class="Estilo4 btn-nav">
                            <a data-toggle="modal" data-target="#Close">
                                <div>
                                    <div align="center" class="Red">Este cliente ya fue cerrado por el módulo de ventas</div>
                                </div>
                            </a>
                        </td>
                    </tr>
                }
            }
        }
    </table>
</div>
<div>
    <nav class="navbar navbar-default Estilo7 container center col-lg-10">
        <div class="container-fluid">
            <div class="navbar-header">
                <ul class="nav navbar-nav">
                    @{
                        var _CompanyName = (from _c in db.Companies
                                            where _c.CompanyId == _Session.ed
                                            select _c).ToList();
                        foreach (var _com in _CompanyName)
                        {
                            <li><a><strong class="Estilo6 btn-nav">Cliente: @_com.CompanyName <span class="sr-only">(current)</span></strong> </a></li>
                        }
                    }
                </ul>
            </div>
        </div>
    </nav>
</div>
<nav class="navbar navbar-default Estilo4 container center col-lg-10">
    <div class="container-fluid">
        <div class="navbar-header">
            <input type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <a href="/FiltroProducción/Pais" class="btn navbar-brand carga" title="Inicio">
                <i class="glyphicon glyphicon-home Estilo8"></i>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="dropdown navbar-default">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Ediciones<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <div id="custom-search-input">
                                <div class="input-group col-md-11">
                                    <input id="CaracterEdiciones" type="text" class="form-control btn-nav" placeholder="Buscar" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-info" type="button">
                                            <i class="glyphicon glyphicon-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <p> </p>
                        </li>
                        @{
                            var _EditionSelected = (from _e in db.Editions
                                                    select _e).ToList();
                            foreach (var a in _EditionSelected)
                            {
                                <li class="ListaEdiciones"><a class="carga" href="/Producción/Clientes/@a.EditionId/@_Session.ed/@_Session._CompanyTypeId">@a.NumberEdition</a></li>
                            }
                        }
                    </ul>
                </li>
                <li class="dropdown navbar-default">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Clientes<span class="caret"></span></a>
                    <ul class="dropdown-menu v" role="menu">
                        <li>
                            <div id="custom-search-input">
                                <div class="input-group col-md-11">
                                    <input id="Caracter" type="text" class="form-control btn-nav" placeholder="Buscar" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-info" type="button">
                                            <i class="glyphicon glyphicon-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <p> </p>
                        </li>
                        @foreach (var a in Model)
                        {
                            <li class="ListaClientes"><a class="carga" href="/Producción/Clientes/@ViewData["Number"]/@a.CompanyId/@a.CompanyTypeId">@a.CompanyName</a></li>
                        }
                    </ul>
                </li>
                <li class="dropdown navbar-default">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Reportes<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        @{
                            var _CompanyReport = (from _c in db.Companies
                                                  where _c.CompanyId == _Session.ed
                                                  select _c).ToList();
                            foreach (var ReporClien in _CompanyReport)
                            {
                                <li><a class="carga" href="/Producción/ReporteEdición/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Reporte de la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                    var _Sucursales = (from _ct in db.CompanyTypes
                                       where _ct.Description == "SUCURSAL"
                                       select _ct).ToList();
                                foreach (var a in _Sucursales)
                                {
                                    <li><a target="_blank" href="/Producción/GenerarReporteSucursales/@ViewData["Number"]/@a.CompanyTypeId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Generar reporte de las <strong class="Estilo6">sucursales</strong> de la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                                }
                                <li><a class="carga" href="/Producción/ReporteProductosEdición/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Reporte de productos participantes en la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteProductosSección/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Reporte de productos por sección de la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteProductosÍndice/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Reporte de productos por índice de la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteMarcasEdición/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Reporte de marcas participantes en la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteAnunciosEdición/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red"></span>Reporte de anuncios participantes en la edición <strong class="Estilo6">@ViewData["Edición"]</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteCliente/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red carga"></span>Reporte de <strong class="Estilo6">@ReporClien.CompanyName</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteProductosCliente/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red carga"></span>Reporte de productos participantes con <strong class="Estilo6">@ReporClien.CompanyName</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteProductosSecciónCliente/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red carga"></span>Reporte de productos por sección participantes con <strong class="Estilo6">@ReporClien.CompanyName</strong></a></li>
                                <li><a class="carga" href="/Producción/ReporteProductosÍndiceCliente/@ViewData["Number"]/@ReporClien.CompanyId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file Red carga"></span>Reporte de productos por índice participantes con <strong class="Estilo6">@ReporClien.CompanyName</strong></a></li>
                            }
                        }
                    </ul>
                </li>
                <li class="dropdown navbar-default">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Reportes Excel<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        @{
                            var _ExcelReportsIndexesGral = (from _ind in db.Indexes
                                                            where _ind.Description == "INDICE GENERAL"
                                                            select _ind).ToList();
                            foreach (var a in _ExcelReportsIndexesGral)
                            {
                                <li><a class="Nombre_Comercial" href="/Producción/ReporteÍndiceGeneral/@ViewData["Number"]/@a.IndexId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file text-success"></span>Índice general por nombre comercial</a></li>
                            }
                        }
                        @{
                            var _ExcelReportsIndexesGen = (from _ind in db.Indexes
                                                           where _ind.Description == "INDICE (Genéricos)"
                                                           select _ind).ToList();
                            foreach (var a in _ExcelReportsIndexesGen)
                            {
                                <li><a class="Genéricos" href="/Producción/ReporteÍndiceGenéricos/@ViewData["Number"]/@a.IndexId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file text-success"></span>Índice general por genéricos</a></li>
                            }
                        }
                        @{
                            var _ExcelReportsIndexesImg = (from _ind in db.Indexes
                                                           where _ind.Description == "INDICE (Imagenología)"
                                                           select _ind).ToList();
                            foreach (var a in _ExcelReportsIndexesImg)
                            {
                                <li><a class="Imagenología" href="/Producción/ReporteÍndiceImagenología/@ViewData["Number"]/@a.IndexId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file text-success"></span>Índice general de imagenología y radiodiagnóstico</a></li>
                            }
                        }
                        @{
                            var _ExcelReportsIndexesBrr = (from _ind in db.Indexes
                                                           where _ind.Description == "INDICE (Marcas)"
                                                           select _ind).ToList();
                            foreach (var a in _ExcelReportsIndexesBrr)
                            {
                                <li><a class="Índice_Marcas" href="/Producción/ReporteÍndiceMarcas/@ViewData["Number"]/@a.IndexId"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file text-success"></span>Índice de marcas </a></li>
                            }
                        }
                        <li><a class="Laboratorios" href="/Producción/Laboratorios_Excel/@ViewData["Number"]"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file text-success"></span>Laboratorios análisis clínicos y diagnóstico por imagen </a></li>
                        <li><a class="Secciones_por_Edición" href="/Producción/ReporteSeccionesEdición/@ViewData["Number"]"><span class="glyphicon glyphiconr glyphicon glyphicon-open-file text-success"></span>Reporte productos por sección </a></li>
                        
                    </ul>
                </li>
                <li class="dropdown navbar-default">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Paginación<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a class="carga" href="/Producción/PaginarClientes/@ViewData["Number"]/@_Session.ed/@_Session._CompanyTypeId"><span class="glyphicon glyphiconr glyphicon-tasks text-info"></span>Paginar clientes</a></li>
                        <li><a class="carga" href="/Producción/PaginarProductos/@ViewData["Number"]/@_Session.ed/@_Session._CompanyTypeId"><span class="glyphicon glyphiconr glyphicon-tasks text-info"></span>Paginar productos</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="btn navbar-brand" title="Anterior" onclick="history.back();">
                        <i class="glyphicon glyphicon-chevron-left Estilo6"></i>
                    </a>
                    <a class="btn navbar-brand" title="Siguiente" onclick="history.forward();">
                        <i class="glyphicon glyphicon-chevron-right Estilo6"></i>
                    </a>
                </li>
                @{
                    CountriesUsers p = (CountriesUsers)Session["CountriesUsers"];
                    var _RolesA = (from _us in plm.Users
                                   join _ap in plm.ApplicationUsers
                                   on _us.UserId equals _ap.UserId
                                   join _r in plm.Roles
                                   on _ap.RoleId equals _r.RoleId
                                   where _us.UserId == p.userId
                                   select _r);
                    if (_RolesA.FirstOrDefault().Description == "Administrador")
                    {
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon glyphiconr glyphicon-bookmark Estilo8"></span> Ventas <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="carga" href="/Ventas/Clientes/@_Session.id/@_Session.ed/@_Session._CompanyTypeId"><span class="glyphicon glyphicon glyphiconr glyphicon-share-alt"></span>Módulo de ventas</a></li>
                            </ul>
                        </li>
                    }
                }
            </ul>
        </div>
    </div>
</nav>
<div class="container col-lg-4 center">
</div>
<div class="container center col-lg-10">
    <div class="row" align="center">
        <div align="center">
            <button type="button" class="btn btn-default2 navbar-default btn-nav ribbon Estilo7">Información del cliente</button>
        </div>
    </div>
    <table class="table table-hover table-bordered">
        @{
            int _CompanyId = _Session.ed;
            int _EditionId = _Session.id;
            var _CompanyDetails = (from _c in db.Companies
                                   join _ce in db.CompanyEditions
                                   on _c.CompanyId equals _ce.CompanyId
                                   join _ct in db.CompanyTypes
                                   on _ce.CompanyTypeId equals _ct.CompanyTypeId
                                   where _ct.CompanyTypeId == _Session._CompanyTypeId
                                   && _c.CompanyId == _Session.ed
                                   select new { _c, _ct }).Distinct();
            foreach (var _cc in _CompanyDetails)
            {
                <tr>
                    <td class="warning Estilo4"><div>Nombre del cliente</div></td>
                    <td align="center" class="warning Estilo4"><div>Tipo de cliente participante</div></td>
                    <td class="warning Estilo4" align="center"><div align="center">Participante</div></td>
                    <td class="warning Estilo4" align="center">
                        <div>
                            <div align="center">Información</div>
                        </div>
                    </td>
                    <td class="warning Estilo4" align="center">
                        <div>
                            <div align="center">Marcas </div>
                        </div>
                    </td>
                    <td class="warning Estilo4" align="center">
                        <div>
                            <div align="center">Productos</div>
                        </div>
                    </td>
                    <td class="warning Estilo4" align="center">
                        <div>
                            <div align="center">Distribuidores</div>
                        </div>
                    </td>
                    @*<td class="warning Estilo4" align="center">
                            <div>
                                <div align="center">Asociar cliente</div>
                            </div>
                        </td>*@
                    <td class="warning Estilo4" align="center">
                        <div>
                            <div align="center">Anuncios</div>
                        </div>
                    </td>
                    <td class="warning Estilo4" align="center">
                        <div>
                            <div align="center">Ediciones</div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="Estilo2 btn-nav">
                        @_cc._c.CompanyName
                    </td>
                    <td class="Estilo2 btn-nav" align="center">
                        @{
                var _CompanyEditionsParticipant = (from _ce in db.CompanyEditions
                                                   where _ce.EditionId == _Session.id
                                                   && _ce.CompanyId == _Session.ed
                                                   select _ce).ToList();
                if (_CompanyEditionsParticipant.LongCount() == 0)
                {
                    <strong class="text-danger">El cliente aún no participa en ésta edición</strong>
                }
                else
                {
                    foreach (var a in _CompanyEditionsParticipant)
                    {
                        @a.CompanyTypes.Description
                    }
                }
                        }
                    </td>
                    <td align="center" class="Estilo2 btn-nav">
                        @{
                            <input type="hidden" value="@_Session.id" id="_EditionId" />
                var _EditionClient = (from _ce in db.CompanyEditions
                                      where _ce.EditionId == _Session.id
                                      && _ce.CompanyId == _Session.ed
                                      select _ce).ToList();
                bool _Checado = false;
                foreach (CompanyEditions _CompanyEditions in _EditionClient)
                {
                    if (_Session.ed == _CompanyEditions.CompanyId)
                    {
                        _Checado = true;
                    }
                }
                        }
                        Edición @ViewData["Edición"]
                        <input type="hidden" id="_CompanyTypeId" name="CompanyTypeId" value="@_Session._CompanyTypeId" />
                        <input disabled type="checkbox" id="@_Session.ed" value="@_Session.ed" name="CompanyEditions" class="Cliente_Participante" checked="@_Checado">
                    </td>
                    <td>
                        <div align="center">
                            <a class="btn btn-primary loading" data-toggle="modal" data-target="#myModal" @*href="~/Producción/DetalleCliente/@ViewData["Number"]/@ViewData["CompanyId"]"*@ title="Información del cliente">
                                <i class="glyphicon glyphicon glyphicon glyphicon-info-sign"></i>
                            </a>
                        </div>
                    </td>
                    <td>
                        <div align="center">
                            <a class="btn btn-success carga loading" href="~/Producción/AsociarMarca/@ViewData["Number"]/@_cc._c.CompanyId/@_cc._ct.CompanyTypeId" title="Marcas">
                                <i class="glyphicon glyphicon glyphicon-tags"></i>
                            </a>
                        </div>
                    </td>
                    <td>
                        <div align="center">
                            <a class="btn btn-info carga loading" href="~/Producción/AsociarProductos/@ViewData["Number"]/@_cc._c.CompanyId/@_cc._ct.CompanyTypeId" title="Productos">
                                <i class="glyphicon glyphicon glyphicon-barcode"></i>
                            </a>
                        </div>
                    </td>
                    <td>
                        <div align="center">
                            <a class="btn btn-danger carga loading" href="~/Producción/Distribuidores/@ViewData["Number"]/@_cc._c.CompanyId/@_cc._ct.CompanyTypeId" title="Distribuidores">
                                <i class="glyphicon glyphicon-export"></i>
                            </a>
                        </div>
                    </td>
                    @*<td>
                            <div align="center">
                                <a class="btn btn-default btn-danger" data-toggle="modal" data-target="#_ModalSecciones" title="Asociar: Cliente a sección">
                                    <i class="glyphicon glyphicon glyphicon glyphicon-indent-left"></i>
                                </a>
                            </div>
                        </td>*@
                    <td>
                        <div align="center">
                            <a class="btn btn-warning loading" data-toggle="modal" data-target="#_AnunciosModal" title="Anuncios">
                                <i class="glyphicon glyphicon glyphicon-font"></i>
                            </a>
                        </div>
                    </td>
                    <td>
                        <div align="center">
                            <a class="btn btn-default btn-nav loading" data-toggle="modal" data-target="#_CompanyEditionsModal" title="Ediciones">
                                <i class="glyphicon glyphicon-indent-right"></i>
                            </a>
                        </div>
                    </td>
                </tr>
            }
        }
    </table>
</div>
<div class="container center col-lg-10" align="center">
    <table>
        <tr>
            <td>
                <div class="col-md-12">
                    <div class="panel panel-warning">
                        <div class="panel-body">
                            <div>
                                <div class="modal-header" align="center">
                                    <h4 class="modal-title Estilo7 btn-nav" id="myModalLabel">Teléfonos</h4>
                                </div>
                                <div align="right" class="modal-header Estilo4 btn-nav"> <img src="/Images/telefono.png" style="float:left; width:15%; height:15%;" class="img-circle" /> Agregar teléfono   <a class="btn btn-success loading" data-toggle="modal" data-target="#AgregarTeléfono"><em class="glyphicon glyphicon-plus"></em></a></div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <br />
                                            <table class="table table-hover table-bordered">
                                                @{
                                                    var _CompanyPhoness = (from _c in db.Companies
                                                                           join _cp in db.CompanyPhones
                                                                           on _c.CompanyId equals _cp.CompanyId
                                                                           join _pt in db.PhoneTypes
                                                                           on _cp.PhoneTypeId equals _pt.PhoneTypeId
                                                                           where _c.CompanyId == _CompanyId
                                                                           select new { _pt, _cp }).ToList();
                                                    if (_CompanyPhoness.LongCount() == 0)
                                                    {
                                                        <tr style="border:hidden">
                                                            <td>
                                                                <div class="Estilo7 Red" align="center">
                                                                    El cliente no tiene teléfonos
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    }
                                                    else
                                                    {
                                                        foreach (var s in _CompanyPhoness)
                                                        {
                                                            <tr>
                                                                <td width="80" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right">  @s._pt.Description  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s._cp.PhoneValue
                                                                    </div>
                                                                </td>
                                                                <td width="150" align="center">
                                                                    <a title="Editar" class="btn btn-default loading" href="~/Producción/EditarTeléfonos/@_Session.ed/@s._cp.PhoneTypeId" data-toggle="modal" data-target="#TTTels" id="enlaceajaxT">
                                                                        <i class=" glyphicon glyphicon-pencil">
                                                                        </i>
                                                                    </a>
                                                                    <a title="Eliminar" class="btn btn-danger loading TeléfonoEliminado" onclick="location.href='@Url.Action("EliminarTeléfono", "Producción", new { id = _EditionId, CompanyId = s._cp.CompanyId, PhoneTypeId = s._pt.PhoneTypeId, CompanyTypeId = _Session._CompanyTypeId })';return false;"><i class="glyphicon glyphicon-trash"></i></a>
                                                                </td>
                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
            <td>
                <div class="col-md-12">
                    <div class="panel panel-warning">
                        <div class="panel-body">
                            <div>
                                <div class="modal-header" align="center">
                                    <h4 class="modal-title Estilo7 btn-nav" id="myModalLabel">Direcciones</h4>
                                </div>
                                <div align="right" class="modal-header Estilo4 btn-nav"> <img src="/Images/direccion.png" style="float:left; width:15%; height:15%;" class="img-circle" /> Agregar dirección   <a class="btn btn-success loading" data-toggle="modal" data-target="#AgregarDirección"><em class="glyphicon glyphicon-plus"></em></a></div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <br />
                                            <table class="table table-hover table-bordered">
                                                @{
                                                    var _AddressCompany = (from _c in db.Companies
                                                                           join _ca in db.CompanyAddresses
                                                                           on _c.CompanyId equals _ca.CompanyId
                                                                           join _ad in db.Addresses
                                                                           on _ca.AddressId equals _ad.AddressId
                                                                           where _c.CompanyId == _Session.ed
                                                                           select _ad).ToList();
                                                    if (_AddressCompany.LongCount() == 0)
                                                    {
                                                        <tr style="border:hidden">
                                                            <td>
                                                                <div class="Estilo7 Red" align="center">
                                                                    El cliente no tiene direcciones
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    }
                                                    else
                                                    {
                                                        foreach (var s in _AddressCompany)
                                                        {
                                                            <tr>
                                                                <td colspan="2" width="150" align="right">
                                                                    <a title="Editar" class="btn btn-default loading" href="~/Producción/EditarDirecciónes/@_Session.ed/@s.AddressId" data-toggle="modal" data-target="#EditarDirecciones" id="EnlaceAjaxEditarDirecciones">
                                                                        <i class=" glyphicon glyphicon-pencil">
                                                                        </i>
                                                                    </a>
                                                                    <a title="Eliminar" class="btn btn-danger loading DirecciónEliminada" onclick="location.href='@Url.Action("EliminarDirección", "Producción", new { id = _EditionId, CompanyId = _Session.ed, AddressId = s.AddressId, CompanyTypeId = _Session._CompanyTypeId })';return false;"><i class="glyphicon glyphicon-trash"></i></a>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Dirección:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Address
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Suburbio:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Suburb
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                                                                                <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Delegación:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Location
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Ubicación:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Ubication
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Código postal:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.ZipCode
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> E-mail:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Email
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Web:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Web
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                    <div>
                                                                        <div align="right"> Contacto:  </div>
                                                                    </div>
                                                                </td>
                                                                <td width="320" align="center" class=" Estilo4 btn-nav">
                                                                    <div align="left">
                                                                        @s.Contact
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                                                                                                        <tr>
                                                                        <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                            <div>
                                                                                <div align="right">País:</div>
                                                                            </div>
                                                                        </td>
                                                                        <td width="320" align="left" class="Estilo4 btn-nav">
                                                                            @{
                            var _citiesss = (from _ci in db.Cities
                                             join _s in db.States
                                             on _ci.StateId equals _s.StateId
                                             join _co in db.Countries
                                             on _s.CountryId equals _co.CountryId
                                             where _ci.CityId == s.CityId
                                             select _co).ToList();
                            foreach (var r in _citiesss)
                            {
                                @r.CountryName
                            }
                                                                            }
                                                                        </td>
                                                                    </tr>
                                                                                                                                        <tr>
                                                                        <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                            <div>
                                                                                <div align="right">Estado:</div>
                                                                            </div>
                                                                        </td>
                                                                        <td width="320" align="left" class="Estilo4 btn-nav">
                                                                            @{
                            var _citiess = (from _ci in db.Cities
                                            join _s in db.States
                                            on _ci.StateId equals _s.StateId
                                            where _ci.CityId == s.CityId
                                            select _s).ToList();
                            foreach (var r in _citiess)
                            {
                                @r.Name
                            }
                                                                            }
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td width="30" align="center" class="Estilo4 btn-nav warning">
                                                                            <div>
                                                                                <div align="right">Ciudad:</div>
                                                                            </div>
                                                                        </td>
                                                                        <td width="320" align="left" class="Estilo4 btn-nav">
                                                                            @{
                            var _cities = (from _ci in db.Cities
                                           where _ci.CityId == s.CityId
                                           select _ci).ToList();
                            foreach (var r in _cities)
                            {
                                @r.Name
                            }
                                                                            }
                                                                        </td>
                                                                    </tr>
                                                        }
                                                    }
                                                }
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div>

<div class="blockscreen" id="cargando">
    <div id="blockmessage">
        <h3 style="color:#000" class="TextBlock">  Cargando... </h3>
    </div>
    <div id="blockimg">
        <img src="/Images/ldd.gif">
    </div>
</div>
<div class="container">
    <div class="modal modal-message modal-success fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="Estilo7 Estilo6 btn-nav" align="center">
                        Información del cliente
                    </div>
                </div>
                <div class="modal-body1">
                    @{
                        var _CompanyEditionss2 = (from _c in db.Companies
                                                  join _ce in db.CompanyEditions on _c.CompanyId equals _ce.CompanyId
                                                  join _ed in db.Editions on _ce.EditionId equals _ed.EditionId
                                                  where _c.CompanyId == _CompanyId
                                                  && _ce.EditionId == _Session.id
                                                  select new { _ed, _c, _ce }).ToList();
                        if (_CompanyEditionss2.LongCount() == 0)
                        {
                            <div class='modal-body'>
                                <div>
                                    <img src="/Images/candado.png" style="float:left; width:22%; height:22%;" />
                                </div>
                                <div class="Estilo7">
                                    ¡No hay información que mostrar, dado que el cliente aún no participa en la edición <strong class="Estilo6">@ViewData["Edición"]</strong>!
                                </div>
                            </div>
                        }
                        var _ClientDetails = (from _c in db.Companies
                                              join _ce in db.CompanyEditions
                                              on _c.CompanyId equals _ce.CompanyId
                                              join _ct in db.CompanyTypes
                                              on _ce.CompanyTypeId equals _ct.CompanyTypeId
                                              where _c.CompanyId == _CompanyId
                                              && _ce.EditionId == _Session.id
                                              select new { _c, _ct }).ToList();
                        foreach (var d in _ClientDetails)
                        {
                            <p class="Estilo7x btn-nav">
                                Nombre del cliente: @d._c.CompanyName
                            </p>
                            <p class="Estilo7x btn-nav">
                                Nombre corto del cliente: @d._c.CompanyShortName
                            </p>
                            <p class="Estilo7x btn-nav">
                                El cliente participa en la edición @ViewData["Edición"] como: @d._ct.Description
                            </p>

                            if (@d._c.CompanyIdParent != null)
                            {
                                <p class="Estilo7x btn-nav">
                                    @{
                                var _ClienParent = (from _c in db.Companies
                                                    where _c.CompanyId == d._c.CompanyIdParent
                                                    select _c).ToList();
                                    }
                                    Cliente asociado: @if (_ClienParent.LongCount() > 0)
                                    {
                                        foreach (var _cpp in _ClienParent)
                                        {
                                            @_cpp.CompanyName
                                        }
                                    }
                                </p>
                            }
                        }
                    }
                </div>
                <div class="modal-header">
                    <button1 type="button" class="btn btn-danger Estilo4" data-dismiss="modal">Cerrar</button1>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="modal modal-message modal-success fade " id="_ModalSecciones" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body1 Estilo2x">
                    <br />
                    <div>
                        <div class="panel panel-warning">
                            <div class="panel-body">
                                <div>
                                    <div class="modal-header Estilo7 btn-nav" align="center">
                                        <h1 class="modal-title btn-nav Estilo7" id="myModalLabel">Secciones asociadas al cliente</h1>
                                    </div>
                                    <div class="modal-body">
                                        <img src="/Images/Sección.png" style="width:30%; height:30%;" class="img-circle" />
                                        <div class="row">
                                            <div>
                                                <br />
                                                <div class="modal-body1">
                                                    <ul class="timeline">
                                                        <li>
                                                            <div hidden class="timeline-panel">
                                                                <div align="right" class="Estilo4 btn-nav modal-body">
                                                                    Agregar cliente a sección
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="timeline-badge">
                                                                <a title="Agregar" class="btn btn-success" href="/Producción/AgregarSeccionesCliente/@_Session.ed" data-toggle="modal" data-target="#TTT" id="enlaceajax">
                                                                    <i class="glyphicon glyphicon-plus"></i>
                                                                </a>
                                                            </div>
                                                            <div class="timeline-panel">
                                                                <div align="right" class="Estilo4 btn-nav modal-body">
                                                                    Agregar cliente a sección
                                                                </div>
                                                            </div>
                                                        </li>
                                                        @{
                                                            var _Sections = (from _c in db.Companies
                                                                             join _cs in db.CompanySections
                                                                             on _c.CompanyId equals _cs.CompanyId
                                                                             join _s in db.Sections
                                                                             on _cs.SectionId equals _s.SectionId
                                                                             where _c.CompanyId == _Session.ed
                                                                             select new { _c, _cs, _s }).ToList();
                                                            foreach (var s in _Sections)
                                                            {
                                                                if (s._s.SectionIdParent == null)
                                                                {
                                                                    <li class="timeline-inverted">
                                                                        <div class="timeline-badge">
                                                                            <a title="Desasociar sección" class="btn btn-danger _CambiosGuardados" onclick="location.href='@Url.Action("EliminarSecciónCliente", "Producción", new { id = ViewData["Number"], CompanyId = s._c.CompanyId, SectionId = s._s.SectionId, CompanyTypeId = _Session._CompanyTypeId })';return false;">
                                                                                <i class="glyphicon glyphicon glyphicon-remove"></i>
                                                                            </a>
                                                                        </div>
                                                                        <div class="timeline-panel">
                                                                            <div align="left" class="Estilo4 modal-body"> <h4 class="Estilo6">(Sección)</h4> <h4 class="btn-nav"> @s._s.Description</h4></div>
                                                                        </div>
                                                                    </li>
                                                                }
                                                                else
                                                                {
                                                                    var _sections = (from _s in db.Sections
                                                                                     where _s.SectionId == s._s.SectionIdParent
                                                                                     select _s).ToList();
                                                                    <li>
                                                                        <div class="timeline-badge">
                                                                            <a class="btn btn btn-danger _CambiosGuardados" onclick="location.href='@Url.Action("EliminarSecciónCliente", "Producción", new { id = ViewData["Number"], CompanyId = s._c.CompanyId, SectionId = s._s.SectionId, CompanyTypeId = _Session._CompanyTypeId })';return false;">
                                                                                <span class="glyphicon glyphicon glyphicon-remove" aria-hidden="true"></span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="timeline-panel" align="left">
                                                                            <div class="timeline-body">
                                                                                @if (_sections.SingleOrDefault().SectionIdParent == null)
                                                                                {
                                                                                    <p class="Estilo4 btn-nav">
                                                                                        <h4 class="Estilo6">(Sub Sección)</h4>
                                                                                        <h4 class="btn-nav">@s._s.Description</h4>
                                                                                    </p>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p class="Estilo4 btn-nav">
                                                                                        <h4 class="Estilo6"> (Sub Sub Sección)</h4>
                                                                                        <h4 class="btn-nav">@s._s.Description</h4>
                                                                                    </p>
                                                                                }
                                                                                <a class="btn btn-nav">
                                                                                    <i class="glyphicon glyphicon-arrow-down">
                                                                                    </i>
                                                                                </a>
                                                                                @if (_sections.LongCount() > 0)
                                                                                {
                                                                                    foreach (var f in _sections)
                                                                                    {
                                                                                        if (f.SectionIdParent == null)
                                                                                        {
                                                                                            <p class="Estilo4 btn-nav">
                                                                                                <h4 class="Estilo6">(Sección)</h4>
                                                                                                <h4 class="btn-nav">@f.Description</h4>
                                                                                            </p>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="Estilo4 btn-nav">
                                                                                                <h4 class="Estilo6">(Sub Sección)</h4>
                                                                                                <h4 class="btn-nav">@f.Description</h4>
                                                                                            </p>
                                                                                            <a class="btn btn-nav">
                                                                                                <i class="glyphicon glyphicon-arrow-down">
                                                                                                </i>
                                                                                            </a>
                                                                                            var _Level = (from _s in db.Sections
                                                                                                          where _s.SectionId == f.SectionIdParent
                                                                                                          select _s).ToList();
                                                                                            if (_Level.LongCount() > 0)
                                                                                            {
                                                                                                foreach (var d in _Level)
                                                                                                {
                                                                                                    <p class="Estilo4 btn-nav">
                                                                                                        <h4 class="Estilo6">(Sección)</h4>
                                                                                                        <h4 class="btn-nav">@d.Description </h4>
                                                                                                    </p>
                                                                                                }
                                                                                            }
                                                                                        }

                                                                                    }
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                }
                                                            }
                                                        }
                                                    </ul>
                                                </div>
                                            </div>
                                            <button1 class="Estilo2x btn btn-danger" data-dismiss="modal">Cerrar</button1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal  fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel" id="_CompanyEditionsModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div align="center">
                <button type="button" class="close text-danger" data-dismiss="modal" aria-hidden="true"><strong class="Red">x</strong></button>
                <h4 class="modal-title Estilo7 Estilo6 btn-nav">Detalle de la edición</h4>
            </div>
            <div class="modal-body">
                @{
                    var _CompanyEditionss = (from _c in db.Companies
                                             join _ce in db.CompanyEditions on _c.CompanyId equals _ce.CompanyId
                                             join _ed in db.Editions on _ce.EditionId equals _ed.EditionId
                                             where _c.CompanyId == _CompanyId
                                             && _ce.EditionId == _Session.id
                                             select new { _ed, _c, _ce }).ToList();
                    if (_CompanyEditionss.LongCount() == 0)
                    {
                        <div class='modal-body'>
                            <div>
                                <img src="/Images/candado.png" style="float:left; width:22%; height:22%;" />
                            </div>
                            <div class="Estilo7">
                                ¡No hay información que mostrar, dado que el cliente aún no participa en la edición <strong class="Estilo6">@ViewData["Edición"]</strong>!
                            </div>
                        </div>
                    }
                    foreach (var s in _CompanyEditionss)
                    {
                        <div align="left">
                            <div>
                                <article>
                                    <br />
                                    <section>
                                        <div>
                                            <div class="panel panel-default" style="background-color:rgba(0, 0, 0, 0.0)">
                                                <div class="panel-body">
                                                    <h3 class="thin text-center Estilo7x btn-nav">DEACI <strong class="Estilo6">@s._ed.NumberEdition</strong></h3>
                                                    <br>
                                                    <table class="table table-hover table-bordered">
                                                        <tr>
                                                            <td width="200" align="center" class="warning Estilo4 btn-nav">
                                                                <div>
                                                                    <div align="right">@s._ce.CompanyTypes.Description:</div>
                                                                </div>
                                                            </td>
                                                            <td align="center" class=" Estilo4 btn-nav">
                                                                <div>
                                                                    <div align="left">@s._c.CompanyName</div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <ul class="timeline">
                                                        <li class="timeline-inverted">
                                                            <div class="timeline-badge">
                                                                @*<a title="Desasociar cliente de la edición" class="btn btn-danger _CambiosGuardados" onclick="location.href='@Url.Action("EliminarEdiciónCliente", "Ventas", new { id = @ViewData["Number"], EditionId = s._ed.EditionId, CompanyId = s._c.CompanyId, CompanyTypeId = _Session._CompanyTypeId})';return false;">
                                                                        <i class="glyphicon glyphicon glyphicon-remove"></i>
                                                                    </a>*@
                                                                @{
                                                                    <a title="Editar" class="btn btn-default" href="/Producción/EditarEdicionesParticipantes/@ViewData["Number"]/@s._ed.EditionId/@s._c.CompanyId/@s._ce.CompanyTypeId" data-toggle="modal" data-target="#EditEdición" id="enlaceajaxEditCompany">
                                                                        <i class="glyphicon glyphicon glyphicon-pencil"></i>
                                                                    </a>

                                                                }
                                                            </div>
                                                            <div class="timeline-panel">
                                                                <div align="left" class="Estilo4 btn-nav modal-body"> DEACI <strong class="Estilo6"> @s._ed.NumberEdition </strong></div>
                                                                @{
                        var _CompanYEditionsContent = (from _ce in db.CompanyEditions
                                                       where _ce.CompanyId == _Session.ed
                                                       && _ce.EditionId == _Session.id
                                                       select _ce).ToList();
                        foreach (var a in _CompanYEditionsContent)
                        {
                            if (a.HtmlContent == null)
                            {
                                <div class="Estilo4 Red">No hay contenido HTML</div>
                            }
                            else
                            {
                                <div class="Estilo4">Contenido:<a href="/Ventas/HTML/@a.EditionId/@a.CompanyId" target="_blank"> @a.HtmlFile</a></div>
                            }
                        }
                                                                }

                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </article>
                            </div>
                        </div>
                    }
                }
                <div align="center">
                    <button1 type="button" class="btn btn-danger Estilo2x" data-dismiss="modal">Cerrar</button1>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="modal fade" id="_AnunciosModal" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div align="center">
                    <button type="button" class="close text-danger" data-dismiss="modal" aria-hidden="true"><strong class="Red">x</strong></button>
                    <h4 class="modal-title Estilo7 Estilo6 btn-nav">Anuncios</h4>
                </div>
                <div class="modal-body">
                    @{
                        var _Compe = (from _ce in db.CompanyEditions
                                      join _ed in db.Editions
                                      on _ce.EditionId equals _ed.EditionId
                                      join _c in db.Companies
                                      on _ce.CompanyId equals _c.CompanyId
                                      where _ce.CompanyId == _Session.ed
                                      && _ce.EditionId == _Session.id
                                      select new { _ce, _ed, _c }).ToList();
                        if (_Compe.LongCount() == 0)
                        {
                            <div class='modal-body'>
                                <div>
                                    <img src="/Images/candado.png" style="float:left; width:22%; height:22%;" />
                                </div>
                                <div class="Estilo7">
                                    ¡El cliente no puede tener anuncios por que no participa en la edición <strong class="Estilo6">@ViewData["Edición"]</strong>!
                                </div>
                            </div>
                        }
                        foreach (var r in _Compe)
                        {
                            <div align="left">
                                <div>
                                    <article>
                                        <br />
                                        <section>
                                            <div>
                                                <div class="panel panel-default" style="background-color:rgba(0, 0, 0, 0.00)">
                                                    <div class="panel-body">
                                                        <h3 class="thin text-center Estilo7x btn-nav">DEACI <strong class="Estilo6">@r._ed.NumberEdition</strong></h3>
                                                        <br>
                                                        <table class="table table-hover table-bordered">
                                                            <tr>
                                                                <td width="200" align="center" class="warning Estilo4 btn-nav">
                                                                    <div>
                                                                        <div align="right">@r._ce.CompanyTypes.Description:</div>
                                                                    </div>
                                                                </td>
                                                                <td align="center" class=" Estilo4 btn-nav">
                                                                    <div>
                                                                        <div align="left">@r._c.CompanyName</div>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <ul class="timeline">
                                                            @{
                            var _Sectionss = (from _c in db.Companies
                                              join _cs in db.CompanySections
                                              on _c.CompanyId equals _cs.CompanyId
                                              join _s in db.Sections
                                              on _cs.SectionId equals _s.SectionId
                                              where _c.CompanyId == _Session.ed
                                              select new { _c, _cs, _s }).ToList();
                            foreach (var s in _Sectionss)
                            {
                                if (s._s.SectionIdParent == null)
                                {
                                    <li class="timeline-inverted">
                                        <div class="timeline-badge">
                                            @{
                                    var _ValueAdver = (from _ade in db.EditionCompanySectionAdvers
                                                       where _ade.CompanyId == s._c.CompanyId
                                                       && _ade.SectionId == s._cs.SectionId
                                                       && _ade.EditionId == _Session.id
                                                       select _ade).ToList();
                                            }
                                        </div>
                                        <div class="timeline-panel">
                                            <div align="left" class="Estilo4 modal-body">
                                                <h4 class="Estilo6">(Sección)</h4> <h4 class="btn-nav"> @s._s.Description</h4>
                                            </div>
                                            @{
                                    if (_ValueAdver.LongCount() == 0)
                                    {
                                        <div align="left" class="Estilo4 modal-body">
                                            <h4 class="Red">Atención:</h4> <h4>En esta sección aún no se encuentran anuncios asociados</h4>
                                        </div>
                                    }
                                    else
                                    {
                                        foreach (var a in _ValueAdver)
                                        {
                                            <div align="left" class="Estilo4 modal-body">
                                                @if (a.AdverFile != null)
                                                {
                                                    var imageName = "";
                                                    imageName = a.AdverFile;
                                                    string fullPath_DEACI = Request.MapPath("/Anuncios/DEACI_" + a.CompanyEditions.Editions.NumberEdition + "/" + imageName);
                                                    if (System.IO.File.Exists(fullPath_DEACI))
                                                    {
                                                        <h4> Anuncio: <a target="_blank" href="/Anuncios/DEACI_@a.CompanyEditions.Editions.NumberEdition/@a.AdverFile" class="Estilo6"> @a.AdverFile </a></h4>
                                                    }
                                                    else
                                                    {
                                                        <h4 class="Estilo6">Anuncio: </h4><strong class="Red">@a.AdverFile</strong>
                                                    }
                                                }
                                                <div>
                                                    <h4>Espacio contratado: </h4> <strong class="Estilo6">@a.HiredSpace</strong>
                                                    <a title="Editar anuncio" class="btn-default" href="/Producción/EditarAnuncio/@a.EditionCompanySectionAdverId/@a.EditionId/@a.CompanyId/@a.SectionId/@_Session._CompanyTypeId" data-toggle="modal" data-target="#_EditarAnuncio" id="EnlaceAjaxEditarAnuncio">
                                                        <i class="glyphicon glyphicon glyphicon-pencil"></i>
                                                    </a>
                                                </div>
                                            </div>
                                                <br />
                                        }
                                    }
                                            }
                                        </div>
                                    </li>
                                }
                                else
                                {
                                    var _sections = (from _s in db.Sections
                                                     where _s.SectionId == s._s.SectionIdParent
                                                     select _s).ToList();
                                    <li>
                                        <div class="timeline-badge">
                                            <a class="btn btn btn-danger _CambiosGuardadosSección" onclick="location.href='@Url.Action("EliminarSecciónCliente", "Ventas", new { id = ViewData["Number"], CompanyId = s._c.CompanyId, SectionId = s._s.SectionId, CompanyTypeId = _Session._CompanyTypeId })';return false;">
                                                <span class="glyphicon glyphicon glyphicon-remove" aria-hidden="true"></span>
                                            </a>
                                        </div>
                                        <div class="timeline-panel" align="left">
                                            <div class="timeline-body">
                                                @if (_sections.SingleOrDefault().SectionIdParent == null)
                                                {
                                                    <p class="Estilo4 btn-nav">
                                                        <h4 class="Estilo6">(Sub Sección)</h4>
                                                        <h4 class="btn-nav">@s._s.Description</h4>
                                                    </p>
                                                }
                                                else
                                                {
                                                    <p class="Estilo4 btn-nav">
                                                        <h4 class="Estilo6"> (Sub Sub Sección)</h4>
                                                        <h4 class="btn-nav">@s._s.Description</h4>
                                                    </p>
                                                }
                                                <a class="btn btn-nav">
                                                    <i class="glyphicon glyphicon-arrow-down">
                                                    </i>
                                                </a>
                                                @if (_sections.LongCount() > 0)
                                                {
                                                    foreach (var f in _sections)
                                                    {
                                                        if (f.SectionIdParent == null)
                                                        {
                                                            <p class="Estilo4 btn-nav">
                                                                <h4 class="Estilo6">(Sección)</h4>
                                                                <h4 class="btn-nav">@f.Description</h4>
                                                            </p>
                                                        }
                                                        else
                                                        {
                                                            <p class="Estilo4 btn-nav">
                                                                <h4 class="Estilo6">(Sub Sección)</h4>
                                                                <h4 class="btn-nav">@f.Description</h4>
                                                            </p>
                                                            <a class="btn btn-nav">
                                                                <i class="glyphicon glyphicon-arrow-down">
                                                                </i>
                                                            </a>
                                                            var _Level = (from _s in db.Sections
                                                                          where _s.SectionId == f.SectionIdParent
                                                                          select _s).ToList();
                                                            if (_Level.LongCount() > 0)
                                                            {
                                                                foreach (var d in _Level)
                                                                {
                                                                    <p class="Estilo4 btn-nav">
                                                                        <h4 class="Estilo6">(Sección)</h4>
                                                                        <h4 class="btn-nav">@d.Description </h4>
                                                                    </p>
                                                                }
                                                            }
                                                        }

                                                    }
                                                }
                                            </div>
                                        </div>
                                    </li>
                                }
                            }
                                                            }
                                                        </ul>

                                                    </div>
                                                </div>
                                            </div>
                                        </section>
                                    </article>
                                </div>
                            </div>
                        }
                    }
                    <div align="center">
                        <button1 type="button" class="btn btn-danger Estilo2x" data-dismiss="modal">Cerrar</button1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="modal modal-message modal-success fade in" id="AgregarTeléfono" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            @using (Html.BeginForm())
            {
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true" class="text-danger">×</span><span class="sr-only">Close</span></button>
                        <div class="Estilo7 Estilo6 btn-nav" align="center">
                            Agregar teléfono
                        </div>
                    </div>
                    <div class="modal-body Estilo2x">
                        <div class="Nota btn-nav" align="right">
                            Nota: Los campos marcados con <strong class="Red">*</strong> son obligatorios.
                            <br />
                        </div>
                        <br />
                        <div class="Estilo7x">
                            <div class="Estilo7x btn-nav" align="left">
                                Tipo de teléfono <strong class="Red">*</strong>
                                <br />
                            </div>
                            <input type="hidden" value="@_CompanyId" id="_CompanyId" />
                            <select id="_PhoneTypeIdAdd" class="form-control Estilo2">
                                <option value="@null">Seleccione...</option>
                                @{
                var _PhoneTypes = (from _pt in db.PhoneTypes
                                   select _pt).ToList();
                foreach (var t in _PhoneTypes)
                {
                    <option value="@t.PhoneTypeId">@t.Description</option>
                }
                                }
                            </select>
                            <div class="Estilo7x">
                                <div class="Estilo7x btn-nav" align="left">
                                    Teléfono <strong class="Red">*</strong>
                                    <br />
                                </div>
                                <input class="form-control btn-nav" id="_PhoneValueAdd" type="text">
                                <input type="hidden" value="@_EditionId" id="_EditionId" />
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="modal-body" align="center">
                        <input type="button" value="Guardar" class="btn btn-success _AgregarTeléfono Estilo2x" />
                        <input type="button" value="Cancelar" class="btn btn-default navbar-default btn-nav Estilo2x" data-dismiss="modal" />
                    </div>
                    <br />
                </div>
            }
        </div>
    </div>
</div>
<div class="container">
    <div class="modal modal-message modal-success fade in" id="AgregarDirección" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            @using (Html.BeginForm())
            {
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true" class="text-danger">×</span><span class="sr-only">Close</span></button>
                        <div class="Estilo7 Estilo6 btn-nav" align="center">
                            Agregar dirección
                        </div>
                    </div>
                    <div class="modal-body Estilo2x">
                        <div class="Nota btn-nav" align="right">
                            Nota: Los campos marcados con <strong class="Red">*</strong> son obligatorios.
                            <br />
                        </div>
                        <br />
                        <div class="Nota btn-nav">
                            <div class="Nota btn-nav" align="left">
                                Dirección: <strong class="Red">*</strong>
                                <br />
                            </div>
                            <input type="hidden" id="_CompanyId" value="@_Session.ed" />
                            <input class="form-control" type="text" id="_Address" />
                        </div>
                        <div class="Nota btn-nav">
                            <div class="Nota btn-nav" align="left">
                                Suburbio:
                                <br />
                            </div>
                            <input class="form-control" type="text" id="_Suburb" />
                        </div>
                        <div class="Nota btn-nav">
                            <div class="Nota btn-nav" align="left">
                                Delegación:
                                <br />
                            </div>
                            <input class="form-control" type="text" id="_Location" />
                        </div>
                        <div class="Nota">
                            <div class="Nota btn-nav" align="left">
                                Ubicación:
                                <br />
                            </div>
                            <input class="form-control" type="text" id="_Ubication" />
                            <div class="Nota btn-nav">
                                <div class="Nota btn-nav" align="left">
                                    Código postal:
                                    <br />
                                </div>
                                <input class="form-control" type="text" id="_ZipCode" />
                            </div>
                            <div class="Nota btn-nav">
                                <div class="Nota btn-nav" align="left">
                                    Email:
                                    <br />
                                </div>
                                <input class="form-control" type="text" id="_Email" />
                            </div>
                            <div class="Nota btn-nav">
                                <div class="Nota btn-nav" align="left">
                                    Web:
                                    <br />
                                </div>
                                <input class="form-control" type="text" id="_Web" />
                            </div>
                            <div class="Nota btn-nav">
                                <div class="Nota btn-nav" align="left">
                                    Contacto:
                                    <br />
                                </div>
                                <input class="form-control" type="text" id="_Contact" />
                            </div>
                            <div align="left" class="Estilo7x btn-nav">
                                Estado:
                                <select id="_StateId" class="form-control _EstadoSelect Estilo2">
                                    <option value="@null">Seleccione...</option>
                                    @{
                var Ciudades = (from _c in db.Cities
                                join _s in db.States
                                on _c.StateId equals _s.StateId
                                select new { _s, _c }).ToList();
                States _Estados = new States();
                Cities _Ciudades = new Cities();
                foreach (var r in Ciudades)
                {
                    if (r._c.CityId == null)
                    {
                        _Ciudades.CityId = int.Parse(null);
                    }
                    else
                    {
                        _Ciudades.CityId = r._c.CityId;
                    }
                }
                foreach (var rr in Ciudades)
                {
                    if (rr._s.StateId == null)
                    {
                        _Estados.StateId = int.Parse(null);
                    }
                    else
                    {
                        _Estados.StateId = rr._s.StateId;
                    }
                }
                var _States = (from _s in db.States
                               orderby _s.Name
                               select _s).ToList();
                foreach (var t in _States)
                {
                    if (t.StateId == _Estados.StateId)
                    {
                    }
                    else
                    {
                        <option value="@t.StateId">@t.Name</option>
                    }
                }
                                    }
                                </select>
                            </div>
                            <div align="left" class="Estilo7x btn-nav">
                                Ciudad:
                                <select id="_CityIdEdit" class="form-control Estilo2">
                                    <option value="@null">Seleccione...</option>
                                    @{
                var _Cities = (from _ct in db.Cities
                               orderby _ct.Name
                               select _ct).ToList();
                foreach (var t in _Cities)
                {
                    if (t.CityId == _Ciudades.CityId)
                    {
                    }
                    else
                    {
                        <option value="@t.CityId">@t.Name</option>
                    }
                }
                                    }
                                </select>
                            </div>
                        </div>
                        <br />
                        <div class="modal-body" align="center">
                            <input type="button" value="Guardar" class="btn btn-success _AgregarDirección Estilo2x" />
                            <input type="button" value="Cancelar" class="btn btn-default navbar-default btn-nav Estilo2x" data-dismiss="modal" />
                        </div>
                        <br />
                    </div>
                </div>
            }
        </div>
    </div>
</div>
<div class="container">
    <div class="modal modal-message modal-success fade" id="Close" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="Estilo7 Estilo6 btn-nav" align="center">
                        Información del cliente
                    </div>
                </div>
                <div class="modal-body1">
                    @{
                        var _CompanyInfo = (from _c in db.Companies
                                            where _c.CompanyId == _Session.ed
                                            select _c).ToList();
                        foreach (var a in _CompanyInfo)
                        {
                            <div class='modal-body'>
                                <div>
                                    <img src="/Images/preview (4).gif" style="float:left; width:35%; height:35%;" />
                                </div>
                                <div class="Estilo7">
                                    El cliente <strong class="Estilo6">@a.CompanyName</strong> ya fue cerrado por <strong>ventas</strong> para la edición <strong>@ViewData["Edición"]</strong>, esto implica que <strong>ventas</strong> ya no podrá realizar cambios a menos de que el usuario <strong class="Red">Administrador</strong> lo rehabilite.
                                </div>
                            </div>
                        }
                    }
                </div>
                <div class="modal-header">
                    <button1 type="button" class="btn btn-danger Estilo4" data-dismiss="modal">Cerrar</button1>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal modal-message modal-success fade in container col-lg-10" id="EditEdición" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg" id="destino">
        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal modal-message modal-success fade in container col-lg-10" id="TTT" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg" id="destino">
        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal modal-message modal-success fade in container col-lg-10" id="_EditarAnuncio" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg" id="DestinoEnlaceAjaxEditarAnuncio">
        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal modal-message modal-success fade in container col-lg-10" id="TTTels" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg" id="destino2">
        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal modal-message modal-success fade in container col-lg-10" id="EditarDirecciones" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg" id="DestinoDirecciones">
        <div class="modal-content">
        </div>
    </div>
</div>


<style>
    .loading, .loading > td, .loading > th, .nav li.loading.active > a, .pagination li.loading, .pagination > li.active.loading > a, .pager > li.loading > a {
        background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, rgba(0, 0, 0, 0) 25%, rgba(0, 0, 0, 0) 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0));
        background-size: 40px 40px;
        animation: 2s linear 0s normal none infinite progress-bar-stripes;
        -webkit-animation: progress-bar-stripes 2s linear infinite;
    }

    .btn.btn-default.loading, input[type="text"].loading, select.loading, textarea.loading, .well.loading, .list-group-item.loading, .pagination > li.active.loading > a, .pager > li.loading > a {
        background-image: linear-gradient(45deg, rgba(235, 235, 235, 0.15) 25%, rgba(0, 0, 0, 0) 25%, rgba(0, 0, 0, 0) 50%, rgba(235, 235, 235, 0.15) 50%, rgba(235, 235, 235, 0.15) 75%, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0));
    }
</style>
